<!DOCTYPE html>
<html lang="en-uk" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Getting up and running with the Ice Sugar Pro Development Board">
<title>Getting started with Ice Sugar Pro </title>

<link rel='canonical' href='https://jjhorton.co.uk/posts/icesugarpro/'>

<link rel="stylesheet" href="/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css"><meta property='og:title' content="Getting started with Ice Sugar Pro ">
<meta property='og:description' content="Getting up and running with the Ice Sugar Pro Development Board">
<meta property='og:url' content='https://jjhorton.co.uk/posts/icesugarpro/'>
<meta property='og:site_name' content='James Horton'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='ECP5' /><meta property='article:tag' content='FPGA' /><meta property='article:tag' content='PCB' /><meta property='article:tag' content='Verilog' /><meta property='article:published_time' content='2022-07-01T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2022-07-01T00:00:00&#43;00:00'/><meta property='og:image' content='https://jjhorton.co.uk/img/iCESugarpro-devboard.jpg' />
<meta name="twitter:site" content="@JamesjHorton">
    <meta name="twitter:creator" content="@JamesjHorton"><meta name="twitter:title" content="Getting started with Ice Sugar Pro ">
<meta name="twitter:description" content="Getting up and running with the Ice Sugar Pro Development Board"><meta name="twitter:card" content="summary">
    <meta name="twitter:image" content='https://jjhorton.co.uk/img/iCESugarpro-devboard.jpg' />
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-HS5DDLL3E1"></script>
      <script>
        var doNotTrack = false;
        if ( true ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-HS5DDLL3E1');
        }
      </script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/myavatar_hu_eb153b5d2864b413.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">James Horton</a></h1>
            <h2 class="site-description">A selection of posts about my random projects at home, covering topics from Electronics to Software Defined Radio, and anything else I can think of</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/jjhorton'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.linkedin.com/in/jjhorton/'
                        target="_blank"
                        title="LinkedIn"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <rect x="4" y="4" width="16" height="16" rx="2" />
  <line x1="8" y1="11" x2="8" y2="16" />
  <line x1="8" y1="8" x2="8" y2="8.01" />
  <line x1="12" y1="16" x2="12" y2="11" />
  <path d="M16 16v-3a2 2 0 0 0 -4 0" />
</svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com/JamesjHorton'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/pages/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/posts/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archive</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    

            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/posts/icesugarpro/">
                
                    <img src="/img/iCESugarpro-devboard.jpg" loading="lazy" alt="Featured image of post Getting started with Ice Sugar Pro " />
                
            </a>
        </div>
    

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/posts/icesugarpro/">Getting started with Ice Sugar Pro </a>
        </h2>
    
        
        <h3 class="article-subtitle">
            Getting up and running with the Ice Sugar Pro Development Board
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jul 01, 2022</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>Having previously purchased a several FPGA development boards, this is the latest one for working with both Yosys and Next-pnr, an open source FPGA tool chain. I have brought 2 of these other boards which are both based around the color light modules, these boards are avalible as both the <a class="link" href="https://www.aliexpress.com/item/1005001686186007.html"  target="_blank" rel="noopener"
    >Lattice ECP5 FPGA Colorlight i5 Development Board</a> and <a class="link" href="https://www.aliexpress.com/item/1005003832457085.html"  target="_blank" rel="noopener"
    >Lattice ECP5 FPGA Colorlight i9 Development Board</a>. They include a breakout board that allows you to connect PMod Modules, HDMI (Which i&rsquo;ve never used) and a USB-C port that allows the connection of a computer to do the programming and serial connections. The breakout board is important for these versions, as it includes everything you need to program the FPGA boards, which can&rsquo;t be done when they aren&rsquo;t in the breakout board.</p>
<p><img src="/img/iCESugarpro-colorlight.jpg"
	
	
	
	loading="lazy"
	
		alt="Other Boards from the same seller"
	
	
></p>
<p>The <a class="link" href="https://www.aliexpress.com/item/1005002270742248.html"  target="_blank" rel="noopener"
    >Ice Sugar Pro</a> is a variation of these boards, it makes use of the same breakout board with the PMod breakouts, but uses a custom FPGA board rather than the modules that are designed for driving the LED Matrix Boards. This means it has some extra features that are specifically designed to make working with it a bit easier, the main one for me is the USB-C port on the FPGA module itself, which provides the debug/programming interface as well as a serial port directly on the FPGA board. Where as my other board don&rsquo;t have the direct programmability, only reprogrammable with the breakout board. This means it should make life easier when I start thinking about building and designing my own custom breakout board.</p>
<p><img src="/img/iCESugarpro-compare.jpg"
	
	
	
	loading="lazy"
	
		alt="Ice Sugar Pro Development Board (Right) Along with Colorlight i9 (Left) and i5 (Center)"
	
	
></p>
<p>The pin out <a class="link" href="https://github.com/wuxx/icesugar-pro/blob/master/doc/iCESugar-pro-pinmap.png"  target="_blank" rel="noopener"
    >iCE Sugar Pro</a> host board which is available from the sellers <a class="link" href="https://github.com/wuxx/icesugar-pro"  target="_blank" rel="noopener"
    >Git Repository</a> is shown bellow, while I do sometimes fid it tricky to map the pins out using this diagram, it is much easier than using the schematic.</p>
<p><img src="/img/iCESugarpro-pinmap.png"
	
	
	
	loading="lazy"
	
		alt="Ice Sugar Pro Pinout from Sellers Git Repo"
	
	
></p>
<p>Unfortunately the connections are different to the other Colorlight <a class="link" href="https://www.aliexpress.com/item/1005001686186007.html"  target="_blank" rel="noopener"
    >i5</a> and <a class="link" href="https://www.aliexpress.com/item/1005003832457085.html"  target="_blank" rel="noopener"
    >i9</a> modules, as the FPGA is in a different package.</p>
<p>Getting a simple FPGA example up and running, displaying a simple pattern on an <a class="link" href="https://github.com/jjhorton/PMod/tree/master/PMod_LED"  target="_blank" rel="noopener"
    >LED PMod board</a>. The code for this is taken from another project, but is just a case of displaying an LED that is bit shifted across the 8 LED&rsquo;s</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-verilog" data-lang="verilog"><span class="line"><span class="cl"><span class="no">`default_nettype</span> <span class="n">none</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">module</span> <span class="n">blinky</span><span class="p">(</span><span class="n">CLK</span><span class="p">,</span> <span class="n">LED</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">input</span> 	<span class="kt">wire</span> 		<span class="n">CLK</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">output</span> 	<span class="kt">wire</span> 	<span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span>	<span class="n">LED</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">parameter</span> 	<span class="n">WIDTH</span><span class="o">=</span><span class="mh">25</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kt">reg</span> 	<span class="p">[</span><span class="n">WIDTH</span><span class="o">-</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span>		<span class="n">counter</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">reg</span> 	<span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span>			<span class="n">display</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">initial</span> <span class="n">counter</span> <span class="o">=</span> <span class="mh">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">initial</span> <span class="n">display</span> <span class="o">=</span> <span class="mh">8</span><span class="mb">&#39;b00000001</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">always</span> <span class="p">@(</span><span class="k">posedge</span> <span class="n">CLK</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">begin</span>
</span></span><span class="line"><span class="cl">		<span class="n">counter</span> <span class="o">&lt;=</span> <span class="n">counter</span> <span class="o">+</span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">counter</span><span class="p">[</span><span class="n">WIDTH</span><span class="o">-</span><span class="mh">1</span><span class="p">]</span> <span class="o">==</span> <span class="mh">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">begin</span>
</span></span><span class="line"><span class="cl">			<span class="c1">// When the counter reaches top value shift the LEd accross one
</span></span></span><span class="line"><span class="cl">			<span class="n">counter</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">(</span><span class="n">display</span><span class="o">==</span> <span class="mh">8</span><span class="mb">&#39;b10000000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">display</span> <span class="o">&lt;=</span> <span class="mh">8</span><span class="mb">&#39;b00000001</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span>
</span></span><span class="line"><span class="cl">				<span class="n">display</span> <span class="o">&lt;=</span> <span class="n">display</span> <span class="o">&lt;&lt;</span> <span class="mh">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">end</span>
</span></span><span class="line"><span class="cl">	<span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">assign</span> <span class="n">LED</span> <span class="o">=</span> <span class="n">display</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">endmodule</span>
</span></span></code></pre></div><p>The pinout for the FPGA needs to be mapped to the output pins which the port that the PMod board is connected to, these are stored in our <code>icesugarpro.pcf</code> file. This not only tells the FPGA where the LED&rsquo;s are connected to, but also where our only input is connected the clock signal as <code>CLK</code> on pin <code>P6</code>, the pin for this is taken directly from the schematic from the sellers <a class="link" href="https://github.com/wuxx/icesugar-pro"  target="_blank" rel="noopener"
    >Git Repository</a> and a number of key pin mappings are provided in the top level README.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-verilog" data-lang="verilog"><span class="line"><span class="cl"><span class="n">LOCATE</span> <span class="n">COMP</span> <span class="s">&#34;CLK&#34;</span> <span class="n">SITE</span> <span class="s">&#34;P6&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">IOBUF</span> <span class="n">PORT</span> <span class="s">&#34;CLK&#34;</span> <span class="n">IO_TYPE</span><span class="o">=</span><span class="n">LVCMOS33</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">LOCATE</span> <span class="n">COMP</span> <span class="s">&#34;LED[0]&#34;</span> <span class="n">SITE</span> <span class="s">&#34;T6&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">LOCATE</span> <span class="n">COMP</span> <span class="s">&#34;LED[1]&#34;</span> <span class="n">SITE</span> <span class="s">&#34;P7&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">LOCATE</span> <span class="n">COMP</span> <span class="s">&#34;LED[2]&#34;</span> <span class="n">SITE</span> <span class="s">&#34;R5&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">LOCATE</span> <span class="n">COMP</span> <span class="s">&#34;LED[3]&#34;</span> <span class="n">SITE</span> <span class="s">&#34;R6&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">LOCATE</span> <span class="n">COMP</span> <span class="s">&#34;LED[4]&#34;</span> <span class="n">SITE</span> <span class="s">&#34;R4&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">LOCATE</span> <span class="n">COMP</span> <span class="s">&#34;LED[5]&#34;</span> <span class="n">SITE</span> <span class="s">&#34;T4&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">LOCATE</span> <span class="n">COMP</span> <span class="s">&#34;LED[6]&#34;</span> <span class="n">SITE</span> <span class="s">&#34;R3&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">LOCATE</span> <span class="n">COMP</span> <span class="s">&#34;LED[7]&#34;</span> <span class="n">SITE</span> <span class="s">&#34;T3&#34;</span><span class="p">;</span>
</span></span></code></pre></div><p>The commands for building the FPGA image, first up is <a class="link" href="https://github.com/YosysHQ/yosys"  target="_blank" rel="noopener"
    >Yosys</a> for the RTL synthesis from our Verilog file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">yosys -p <span class="s1">&#39;synth_ecp5 -top blinky -json blinky.json&#39;</span> blinky.v
</span></span></code></pre></div><p>Then <a class="link" href="https://github.com/YosysHQ/nextpnr"  target="_blank" rel="noopener"
    >nextpnr</a> for completing the job of Place and Route of our design onto the FPGA&rsquo;s resources:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nextpnr-ecp5 --25k --package CABGA256 --json blinky.json --lpf icesugarpro.pcf --textcfg blinky.config --freq <span class="m">100</span>
</span></span></code></pre></div><p>Packing up the image and transfering it to the fpga, the tool <code>ecppack</code> is used to convert the config file into the format that will be loaded onto the FPGA. One key feature that I am using here is the <code>--compress</code> flag, this compressed the bit file and dramatically reduces the programming time for the board. In this case it reduces it from  to less than 4 seconds</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ecppack --compress --bit blinky.bin blinky.config
</span></span><span class="line"><span class="cl">ecpdap program --freq <span class="m">5000</span> blinky.bin
</span></span></code></pre></div><p>Rather than just programming the FPGA directly, we can also upload the design to the on-board flash, so that when we power cycle the FPGA it still loads our design.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ecpdap flash unprotect 
</span></span><span class="line"><span class="cl">ecpdap flash write --freq <span class="m">5000</span> blinky.bin 
</span></span></code></pre></div><p>The first line doesn&rsquo;t aways need to be run, by default the flash should be unprotected, but I found sometimes it would fail to program, and with this quick simple command it works a lot more reliably.</p>
<p><img src="/img/iCESugarpro-PModLed.jpg"
	
	
	
	loading="lazy"
	
		alt="Ice Sugar Pro with PMod LED Board"
	
	
></p>
<p>A full copy of the code for this blink example can be downloaded from <a class="link" href="https://gist.github.com/jjhorton/6b546071cedb00800551ad31aa7a9232"  target="_blank" rel="noopener"
    >github</a>. My Next challenge with this board is to have a look at the RGB LED, and see if I can get a program together to show the full range of colors with it, before looking into building a custom host board to work with it.</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/ecp5/">ECP5</a>
        
            <a href="/tags/fpga/">FPGA</a>
        
            <a href="/tags/pcb/">PCB</a>
        
            <a href="/tags/verilog/">Verilog</a>
        
    </section>


    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/posts/led_array_fpga/">
        
        
            <div class="article-image">
                
                    <img src="/img/LED_Array_FPGA_Complete.jpg" loading="lazy" data-key="" data-hash="/img/LED_Array_FPGA_Complete.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">PMod LED Array using with an FPGA </h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/posts/neopixelfirmware/">
        
        
            <div class="article-image">
                
                    <img src="/img/iceNeopixel_on.jpg" loading="lazy" data-key="" data-hash="/img/iceNeopixel_on.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Controlling Neopixels with iceBreaker FPGA </h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/posts/ecp5g-eval/">
        
        
            <div class="article-image">
                
                    <img src="/img/lfe5um5g.jpg" loading="lazy" data-key="" data-hash="/img/lfe5um5g.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Opensource FPGA tools for ECP5 Evaluation Board</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/posts/fpga-build-stats/">
        
        
            <div class="article-image">
                
                    <img src="/img/colorlitei5.jpg" loading="lazy" data-key="" data-hash="/img/colorlitei5.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Adding FPGA build stats to Github Pull requests</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/posts/firmware-testing/">
        
        
            <div class="article-image">
                
                    <img src="/img/icebreaker.jpg" loading="lazy" data-key="" data-hash="/img/icebreaker.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Continuous Integration for Firmware testing using Verilator</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2006 - 
        
        2025 James Horton
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
